{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/georgiosloulakis/Documents/instappfood_Project/components/main/Feed.js\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport { Icon } from 'react-native-elements';\nimport firebase from 'firebase';\n\nrequire('firebase/firestore');\n\nimport { connect } from 'react-redux';\nimport LottieView from 'lottie-react-native';\n\nfunction Feed(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  useEffect(function () {\n    if (props.usersFollowingLoaded == props.following.length && props.following.length !== 0) {\n      props.feed.sort(function (x, y) {\n        return x.creation - y.creation;\n      });\n      setPosts(props.feed);\n    }\n  }, [props.usersFollowingLoaded, props.feed]);\n\n  var onLikePress = function onLikePress(userId, postId) {\n    firebase.firestore().collection(\"posts\").doc(userId).collection(\"userPosts\").doc(postId).collection(\"likes\").doc(firebase.auth().currentUser.uid).set({});\n  };\n\n  var onDislikePress = function onDislikePress(userId, postId) {\n    firebase.firestore().collection(\"posts\").doc(userId).collection(\"userPosts\").doc(postId).collection(\"likes\").doc(firebase.auth().currentUser.uid).delete();\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, React.createElement(FlatList, {\n    numColumns: 1,\n    horizontal: false,\n    data: posts,\n    borderRadius: 10,\n    extraData: posts,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: styles.Card,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          return props.navigation.navigate('ShowInfo', {\n            postId: item.id,\n            uid: item.user.uid\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 29\n        }\n      }, React.createElement(Image, {\n        style: styles.image,\n        source: {\n          uri: item.downloadURL\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 45\n        }\n      })), React.createElement(View, {\n        style: styles.header,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: styles.headerText,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 33\n        }\n      }, item.title)), React.createElement(View, {\n        style: styles.header2,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: styles.headerText2,\n        onPress: function onPress() {\n          return props.navigation.navigate(\"Profile\", {\n            uid: item.user.uid\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 33\n        }\n      }, \"Posted by \", item.user.name, \" \")), React.createElement(View, {\n        style: styles.HartContainer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 29\n        }\n      }, React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 33\n        }\n      }, item.currentUserLike ? React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          return onDislikePress(item.user.uid, item.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 45\n        }\n      }, React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 49\n        }\n      }, React.createElement(Image, {\n        source: require(\"../Images/dislike.gif\"),\n        style: {\n          width: 60,\n          height: 60,\n          borderRadius: 20,\n          alignContent: 'center',\n          alignItems: 'center',\n          backgroundColor: '#4682b4'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 49\n        }\n      }))) : React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          return onLikePress(item.user.uid, item.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 45\n        }\n      }, React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 49\n        }\n      }, React.createElement(Image, {\n        source: require(\"../Images/like.gif\"),\n        style: {\n          width: 60,\n          height: 60,\n          borderRadius: 20,\n          alignContent: 'center',\n          alignItems: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 49\n        }\n      }))))), React.createElement(View, {\n        style: styles.CommentContainer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableHighlight, {\n        onPress: function onPress() {\n          return props.navigation.navigate('Comment', {\n            postId: item.id,\n            uid: item.user.uid\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 33\n        }\n      }, React.createElement(View, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 45\n        }\n      }, React.createElement(Image, {\n        source: require(\"../Images/comment2.gif\"),\n        style: {\n          width: 60,\n          height: 60,\n          borderRadius: 40,\n          alignContent: 'center',\n          alignItems: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 45\n        }\n      })))));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: 20,\n    paddingTop: 15\n  },\n  image: {\n    width: null,\n    height: 300\n  },\n  header: {\n    width: '100%',\n    height: 35,\n    position: 'relative',\n    shadowRadius: 20,\n    backgroundColor: '#4682b4'\n  },\n  headerText: {\n    fontSize: 20,\n    color: 'white',\n    shadowColor: '#4682b4',\n    shadowOpacity: 0.2,\n    margin: 3,\n    fontFamily: 'AvenirNext-Bold',\n    fontWeight: 'bold'\n  },\n  header2: {\n    width: '100%',\n    height: 30,\n    position: 'relative',\n    alignItems: 'flex-end',\n    backgroundColor: '#b0c4de',\n    borderBottomLeftRadius: 10,\n    borderBottomRightRadius: 10\n  },\n  headerText2: {\n    fontSize: 12,\n    color: '#191970',\n    shadowColor: 'white',\n    shadowOpacity: 0.1,\n    padding: 5,\n    fontFamily: 'Noteworthy',\n    fontWeight: 'bold'\n  },\n  HartContainer: {\n    flexWrap: \"wrap\",\n    position: 'absolute',\n    top: '75%',\n    shadowColor: '#b0c4de',\n    shadowOpacity: 100,\n    shadowRadius: 60,\n    paddingLeft: '85%'\n  },\n  CommentContainer: {\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    position: 'absolute',\n    top: '2%',\n    paddingLeft: '85%',\n    shadowOpacity: 20,\n    shadowRadius: 4\n  },\n  Card: {\n    paddingTop: 30\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser,\n    following: store.userState.following,\n    feed: store.usersState.feed,\n    usersFollowingLoaded: store.usersState.usersFollowingLoaded\n  };\n};\n\nexport default connect(mapStateToProps, null)(Feed);","map":{"version":3,"sources":["/Users/georgiosloulakis/Documents/instappfood_Project/components/main/Feed.js"],"names":["React","useState","useEffect","Icon","firebase","require","connect","LottieView","Feed","props","posts","setPosts","usersFollowingLoaded","following","length","feed","sort","x","y","creation","onLikePress","userId","postId","firestore","collection","doc","auth","currentUser","uid","set","onDislikePress","delete","styles","container","item","Card","navigation","navigate","id","user","image","uri","downloadURL","header","headerText","title","header2","headerText2","name","HartContainer","currentUserLike","width","height","borderRadius","alignContent","alignItems","backgroundColor","CommentContainer","StyleSheet","create","flex","marginTop","paddingTop","position","shadowRadius","fontSize","color","shadowColor","shadowOpacity","margin","fontFamily","fontWeight","borderBottomLeftRadius","borderBottomRightRadius","padding","flexWrap","top","paddingLeft","flexDirection","mapStateToProps","store","userState","usersState"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { StyleSheet,View, Text, Image, FlatList,TouchableHighlight } from 'react-native'\nimport { Icon } from 'react-native-elements'\nimport firebase from 'firebase'\nrequire('firebase/firestore')\nimport { connect } from 'react-redux'\nimport LottieView from 'lottie-react-native';\n\n\nfunction Feed(props) {\n    const [posts, setPosts] = useState([]);\n\n    useEffect(() => {\n        if (props.usersFollowingLoaded == props.following.length && props.following.length !== 0) {\n            props.feed.sort(function (x, y) {\n                return x.creation - y.creation;\n            })\n            setPosts(props.feed);\n        }\n    }, [props.usersFollowingLoaded, props.feed])\n\n    const onLikePress = (userId, postId) => {\n        firebase.firestore()\n            .collection(\"posts\")\n            .doc(userId)\n            .collection(\"userPosts\")\n            .doc(postId)\n            .collection(\"likes\")\n            .doc(firebase.auth().currentUser.uid)\n            .set({})\n    }\n    const onDislikePress = (userId, postId) => {\n        firebase.firestore()\n            .collection(\"posts\")\n            .doc(userId)\n            .collection(\"userPosts\")\n            .doc(postId)\n            .collection(\"likes\")\n            .doc(firebase.auth().currentUser.uid)\n            .delete()\n    }\n\n \n\n    return (\n        <View style={styles.container}>\n                <FlatList\n                    numColumns={1}\n                    horizontal={false}\n                    data={posts}\n                    borderRadius = {10}\n                    extraData={posts}\n                    renderItem={({ item }) => (\n                        <View style={styles.Card}>\n                            <TouchableHighlight onPress={() => props.navigation.navigate('ShowInfo', { postId: item.id, uid: item.user.uid })}>\n                                            <Image\n                                                style={styles.image}\n                                                source={{ uri: item.downloadURL }}\n                                            />\n                            </TouchableHighlight>\n                            <View style={styles.header}>\n                                <Text style={styles.headerText}>{item.title}</Text>\n                            </View>\n                            <View style={styles.header2}>\n                                <Text style={styles.headerText2} onPress={() => props.navigation.navigate(\"Profile\", {uid: item.user.uid})}>\n                                     Posted by {item.user.name} </Text>\n                            </View>\n                            <View style={styles.HartContainer}>\n                                <View>\n                                    { item.currentUserLike ?\n                                        (\n                                            <TouchableHighlight onPress={()=>onDislikePress(item.user.uid, item.id)}>\n                                                <View>\n                                                <Image \n                                                    source={require('../Images/dislike.gif')}  \n                                                    style={{\n                                                        width:60, \n                                                        height:60,\n                                                        borderRadius:20,\n                                                        alignContent:'center',\n                                                        alignItems:'center',\n                                                        backgroundColor:'#4682b4'\n                                                    }}\n                                                />\n                                                </View>\n                                            </TouchableHighlight>\n                                        )\n                                        :\n                                        (\n                                            <TouchableHighlight onPress={()=>onLikePress(item.user.uid, item.id)}>\n                                                <View>\n                                                <Image \n                                                    source={require('../Images/like.gif')}  \n                                                    style={{\n                                                        width:60, \n                                                        height:60,\n                                                        borderRadius:20,\n                                                        alignContent:'center',\n                                                        alignItems:'center',\n                                                    }}\n                                                />\n                                                </View>\n                                            </TouchableHighlight>\n                                        )\n                                    } \n                                </View>\n                            </View>\n                            <View style={styles.CommentContainer}>\n                                <TouchableHighlight onPress={() => props.navigation.navigate('Comment', { postId: item.id, uid: item.user.uid })}>\n                                            <View>\n                                            <Image \n                                                    source={require('../Images/comment2.gif')}  \n                                                    style={{\n                                                        width:60, \n                                                        height:60,\n                                                        borderRadius:40,\n                                                        alignContent:'center',\n                                                        alignItems:'center',\n                                                    }}\n                                                />\n                                            </View>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    )}\n                />\n            </View>\n    \n    )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        marginTop:20,\n        paddingTop:15\n      },\n      image:{\n        width:null,\n        height:300\n    },\n    header:{\n        width: '100%',\n        height:35,\n        position:'relative',\n        shadowRadius:20,\n        backgroundColor: '#4682b4',\n      },\n      headerText:{\n        fontSize:20,\n        color:'white',\n        shadowColor:'#4682b4',\n        shadowOpacity:0.2,\n        margin:3,\n        fontFamily:'AvenirNext-Bold',\n        fontWeight:'bold'\n    },\n    header2:{\n        width: '100%',\n        height:30,\n        position:'relative',\n        alignItems:'flex-end',\n        backgroundColor: '#b0c4de',\n        borderBottomLeftRadius:10,\n        borderBottomRightRadius:10,\n      },\n    headerText2:{\n        fontSize:12,\n        color:'#191970',\n        shadowColor:'white',\n        shadowOpacity:0.1,\n        padding:5,\n        fontFamily:'Noteworthy',\n        fontWeight:'bold'\n    },\n    HartContainer:{\n        flexWrap: \"wrap\",\n        position:'absolute',\n        top:'75%',\n        shadowColor:'#b0c4de',\n        shadowOpacity:100,\n        shadowRadius:60,\n        paddingLeft:'85%',\n    },\n    CommentContainer:{\n        flexDirection: \"row\",\n        flexWrap: \"wrap\",\n        position:'absolute',\n        top:'2%',\n        paddingLeft:'85%',\n        shadowOpacity:20,\n        shadowRadius:4,\n    },\n    Card:{\n        paddingTop:30,\n    }\n})\nconst mapStateToProps = (store) => ({\n    currentUser: store.userState.currentUser,\n    following: store.userState.following,\n    feed: store.usersState.feed,\n    usersFollowingLoaded: store.usersState.usersFollowingLoaded,\n\n\n})\nexport default connect(mapStateToProps, null)(Feed);"]},"metadata":{},"sourceType":"module"}